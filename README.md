# Лабораторные работы по курсу "Программная инженерия"

Выполнил студент М8О-109СВ-24 Жбанов Илья

*Вариант №4*

## Лабораторная работа №1

Целью работы является получение навыка в описании архитектуры в стиле Architecture As A Code и
проектировании системы «сверху вниз».

Необходимо создать описание архитектуры системы в формате Structurizr DSL:
1. Изучите текст задания.
2. Определите перечень ролей пользователей и перечень внешних систем.
3. Создайте описание softwareSystem и диаграмму systemContext
4. Продумайте основные задачи пользователей и как они могут быть реализованы
5. Сформируйте перечень container отвечающих за обработку событий, связанных с объектами
предметной области, определенной в задании (Клиентский сервис, Сервис управления
доставкой, Сервис регистрации платежей …)
6. Определите взаимодействие между контейнерами (создание пользователя, создание заказа на
доставку …)
7. Опишите модель container в Structurizr DSL и создайте диаграмму Container.
8. Определите технологии и проставьте их на контейнерах и связях
9. Создайте одну диаграмму dynamic для архитектурно значимого варианта использования
(отправка сообщения между пользователями, покупка товара в магазине ….)

Результат должен быть оформлен в виде следующих файлов, размещенных в вашем github:
- [readme.md](./README.md) с текстом задания
- [workspace.dsl](./workspace.dsl) с моделью и view

Полезный пример проекта в Structurizr DSL:
https://github.com/DVDemon/architecture_python/tree/main/01_structurizr

Справка по языку: https://docs.structurizr.com/dsl/language

---

**Сайт заказа услуг** 
Референс: https://profi.ru/

Приложение должно содержать следующие данные:
- Пользователь
- Услуга
- Заказ

Реализовать API:
- Создание нового пользователя
- Поиск пользователя по логину
- Поиск пользователя по маске имя и фамилии
- Создание услуги
- Получение списка услуг
- Добавление услуг в заказ
- Получение заказа для пользователя

---

## Лабораторная работа №2

1. Создайте HTTP REST API для сервисов, спроектированных в первом задании (по
проектированию). Должно быть реализовано как минимум два сервиса
(управления пользователем, и хотя бы один «бизнес» сервис)
2. Сервис должен поддерживать аутентификацию с использованием JWT-token
(Bearer)
3. Должен быть отдельный endpoint для получения токена по логину/паролю
4. Сервис должен реализовывать как минимум GET/POST методы
5. Данные сервиса должны храниться в памяти (базу данных добавим потом)
6. В целях проверки должен быть заведён мастер-пользователь (имя admin,
пароль secret)
7. Сделайте OpenAPI спецификацию и сохраните ее в корне проекта
8. Актуализируйте модель архитектуры в Structurizr DSL
9. Ваши сервисы должны запускаться через docker-compose коммандой dockercompose up (создайте Docker файлы для каждого сервиса)

---

## Лабораторная работа №3

1. Для сервиса управления данными (созданного в предыдущей лабораторной
работе) о клиентах создайте долговременное хранилище данных в
реляционной СУБД PostgreSQL 14;
2. Должен быть создан скрипт по созданию базы данных и таблиц, а также
наполнению СУБД тестовыми значениями. Он должен запускаться при первом
запуске вашего сервиса;
3. Для сущности, должны быть созданы запросы к БД (CRUD) согласно ранее
разработанной архитектуре
4. Данные о пользователе должны включать логин и пароль. Пароль должен
храниться в закрытом виде (хэширован) – в этом задании опционально
5. Должно применяться индексирования по полям, по которым будет
производиться поиск
6. При необходимости актуализируйте модель архитектуры в Structurizr DSL
7. Ваши сервисы должны запускаться через docker-compose командой dockercompose up (создайте Docker файлы для каждого сервиса)

---

## Лабораторная работа №4

1. Для одного сервиса управления данными (созданного в предыдущих
лабораторных работах) создайте долговременное хранилище данных в noSQL
базе данных MongoDB (4.0 или 5.0);
2. Выберете любой сервис, не связанный с клиентскими данными (клиентский
сервис остается в PostgreSQL). Например, данные о поездках, данные о планах,
данные о сообщениях ….
3. Должен быть создан скрипт по наполнению СУБД тестовыми значениями. Он
должен запускаться при первом запуске вашего сервиса;
4. Для сущности, должны быть созданы запросы к БД (CRUD) согласно ранее
разработанной архитектуре
5. Должны быть созданы индексы, ускоряющие запросы
6. Должно применяться индексирования по полям, по которым будет
производиться поиск
7. При необходимости актуализируйте модель архитектуры в Structurizr DSL
8. Ваши сервисы должны запускаться через docker-compose командой dockercompose up (создайте Docker файлы для каждого сервиса)

---

## Лабораторная работа №5

1. Для данных, хранящихся в реляционной базе PotgreSQL реализуйте шаблон
сквозное чтение и сквозная запись (Пользователь/Клиент …);
2. В качестве кеша – используйте Redis
3. Замерьте производительность запросов на чтение данных с и без кеша с
использованием утилиты wrk https://github.com/wg/wrk изменяя количество
потоков из которых производятся запросы (1, 5, 10)
4. Актуализируйте модель архитектуры в Structurizr DSL
5. Ваши сервисы должны запускаться через docker-compose командой dockercompose up (создайте Docker файлы для каждого сервиса)

---

## Лабораторная работа №6

1. Реализуйте для добавления одной из сущностей вашего задания паттерн CQRS:
    
    a. сервис вместо записи в базу данных должен сохранять сообщение в topic
kafka (допускается одновременное сохранение сущности в кеш Redis –
шаблон сквозная-запись)
    
    b. реализуйте отдельный контейнер, который считывает сообщения из
topic kafka и сохраняет их в базу данных
2. Актуализируйте модель архитектуры в Structurizr DSL
3. Ваши сервисы должны запускаться через docker-compose командой dockercompose up (создайте Docker файлы для каждого сервиса)

---